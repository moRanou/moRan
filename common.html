<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>


// 箭头函数
function foo() {
    console.log('hello');
}
const foo = () => console.log('hello');

// 数组去重
const formatArray = arr => [... new Set(arr)];

// 数组合并
const newArr = [...arr1, ...arr2, 'value'];

//对象浅拷贝
let obj = {...obj1}

/**
 * 优雅的js判断
 * 按钮点击事件
 * @param {number} status 活动状态：1 开团进行中 2 开团失败 3 商品售罄 4 开团成功 5 系统取消
 */
 const onButtonClick = (status)=>{
  if(status == 1){
    sendLog('processing')
  }else if(status == 2){
    sendLog('fail')
  }else if(status == 3){
    sendLog('pedding')
  }else if(status == 4){
    sendLog('success')
  }else if(status == 5){
    sendLog('cancel')
  }else {
    sendLog('other')
  }
}

// switch case 的写法
const onButtonClick = (status) => {
    switch (status){
    case 1:
      sendLog('processing')
      break
    case 2:
      sendLog('pedding')
      break  
    case 3:
      sendLog('fail')
      break  
    case 4:
      sendLog('success')
      break
    case 5:
      sendLog('cancel')
      break
    default:
      sendLog('other')
      break
  }
}


// 再次升级， 对象属性值
const actions = {
    '1': 'processing',
    '2': 'pedding',
    '3': 'fail',
    '4': 'success',
    '5': 'cancel',
    'default': 'other'
}
const onButtonClick = (status) => {
    let action = actions[status] || actions['default'];
    sendLog(action)
}




// 以及new Map的方法
const actions = new Map([
    [1, 'processing'],
    [2, 'pedding'],
    [3, 'fail'],
    [4, 'success'],
    [5, 'cancel'],
    ['default', 'other'],
])
const onButtonClick = (status) => {
    let action = actions.get(status) || actions.get('default');
    sendLog(action)
}


  // 时间戳转换为最近时间
 function dateDiff(timestamp) {
    let arrTimestamp = (timestamp + '').split('');
    for (let start = 0; start < 13; start++) {
      if (!arrTimestamp[start]) {
        arrTimestamp[start] = '0';
      }
    }
    timestamp = arrTimestamp.join('') * 1;
    let minute = 1000 * 60;
    let hour = minute * 60;
    let day = hour * 24;
    let halfamonth = day * 15;
    let month = day * 30;
    let now = new Date().getTime();
    let diffValue = now - timestamp;

    // 如果本地时间反而小于变量时间
    if (diffValue < 0) {
      return '不久前';
    }
    let monthC = diffValue / month;
    let weekC = diffValue / (7 * day);
    let dayC = diffValue / day;
    let hourC = diffValue / hour;
    let minC = diffValue / minute;

    // 数值补0方法
    let zero = function(value) {
      if (value < 10) {
        return '0' + value;
      }
      return value;
    };

    if (monthC > 12) {
      // 超过1年，直接显示年月日
      return (function() {
        let date = new Date(timestamp);
        return date.getFullYear() + '年' + zero(date.getMonth() + 1) + '月' + zero(date.getDate()) + '日';
      })();
    } else if (monthC >= 1) {
      return parseInt(monthC) + "月前";
    } else if (weekC >= 1) {
      return parseInt(weekC) + "周前";
    } else if (dayC >= 1) {
      return parseInt(dayC) + "天前";
    } else if (hourC >= 1) {
      return parseInt(hourC) + "小时前";
    } else if (minC >= 1) {
      return parseInt(minC) + "分钟前";
    }
    return '刚刚';
  }

</script>
</html>